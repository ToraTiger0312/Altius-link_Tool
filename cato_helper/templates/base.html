<!-- cato_helper/templates/base.html -->
<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>Cato Helper</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>
{% set current_endpoint = request.endpoint or '' %}

<div class="app-root">
    <!-- 上部バー -->
    <header class="topbar">
        <div class="topbar-left">
            <div class="brand-logo">Altius Link</div>

            <nav class="top-nav">
                <!-- 業務支援ツール -->
                <a href="{{ url_for('core.index') }}"
                   class="top-nav-item {% if current_endpoint and current_endpoint.startswith('core.') %}active{% endif %}">
                    業務支援ツール
                </a>

                <!-- Network 関連（Site への Network 追加ツール） -->
                <a href="{{ url_for('network.static_route_add') }}"
                   class="top-nav-item {% if current_endpoint and current_endpoint.startswith('network.') %}active{% endif %}">
                    Network
                </a>

                <!-- 以下は Coming Soon & クリック不可 -->
                <span class="top-nav-item disabled">Home</span>
                <span class="top-nav-item disabled">Access</span>
                <span class="top-nav-item disabled">Security</span>
                <span class="top-nav-item disabled">Resources</span>
                <span class="top-nav-item disabled">Account</span>
            </nav>
        </div>

        <!-- 右上 CMA ログインエリア -->
        <div class="topbar-right">
            <div class="profile-selector">
                <div class="profile-selector-header">
                    <span class="profile-label">プロファイル</span>
                    <span class="profile-helper">接続先を選択してください</span>
                </div>
                <div class="profile-selector-body">
                    <div class="profile-select-wrap">
                        <span class="profile-select-icon" aria-hidden="true">🔰</span>
                        <select id="cma-profile-select" class="profile-select" disabled>
                            <option>読み込み中...</option>
                        </select>
                    </div>
                    <span id="cma-login-status" class="login-status-badge login-status-off">
                        未ログイン
                    </span>
                </div>
            </div>
            <button id="cma-login-button" class="btn btn-cma-login">
                CMAログイン
            </button>
        </div>
    </header>

    <!-- メインレイアウト -->
    <div class="main-layout">
        <!-- 左メニュー -->
        <aside class="sidebar">
            {% if current_endpoint and current_endpoint.startswith('core.') %}
            <!-- 業務支援ツール（CMA設定関連） -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <span class="sidebar-section-label">CMA設定関連</span>
                    <span class="sidebar-toggle-icon">▾</span>
                </div>
                <div class="sidebar-section-items">
                    <a class="sidebar-item active" href="{{ url_for('core.index') }}">
                        サブネット分割
                    </a>
                </div>
            </div>

            {% elif current_endpoint and current_endpoint.startswith('network.') %}
            <!-- Network メニュー（Site 関連の設定） -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <span class="sidebar-section-label">Site関連の設定</span>
                    <span class="sidebar-toggle-icon">▾</span>
                </div>
                <div class="sidebar-section-items">
                    <a class="sidebar-item {% if current_endpoint == 'network.static_route_add' %}active{% endif %}"
                       href="{{ url_for('network.static_route_add') }}">
                        Static Route追加
                    </a>
                </div>
            </div>

            {% else %}
            <!-- デフォルト（今後メニューが増えた場合のフォールバック） -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">
                    <span class="sidebar-section-label">メニュー</span>
                    <span class="sidebar-toggle-icon">▾</span>
                </div>
                <div class="sidebar-section-items">
                    <span class="sidebar-item">メニュー未定義</span>
                </div>
            </div>
            {% endif %}
        </aside>

        <!-- 右側コンテンツ -->
        <main class="main-content">
            {% block content %}{% endblock %}
        </main>
    </div>
</div>

<!-- 右下の終了ボタン -->
<button id="app-exit-button" class="btn btn-exit">終了</button>

</body>
</html>
